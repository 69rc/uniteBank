(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90683,e=>{"use strict";var r=e.i(17276),t=e.i(13851),s=e.i(56973),n=e.i(17550),i=e.i(66327),a=e.i(87277),o=e.i(82413),l=e.i(92571),c=e.i(97257),m=e.i(22054),u=e.i(63047),d=e.i(15755),h=e.i(88037);let p=i.z.object({recipientAccountNumber:i.z.string().min(10,"Account number must be at least 10 digits"),amount:i.z.string().refine(e=>!isNaN(parseFloat(e))&&parseFloat(e)>0,{message:"Amount must be greater than 0"}),description:i.z.string().optional()});function x(){let{toast:e}=(0,d.useToast)(),[i,x]=(0,t.useState)(null),[j,f]=(0,t.useState)(!1),[b,F]=(0,t.useState)(!1),N=(0,s.useForm)({resolver:(0,n.zodResolver)(p),defaultValues:{recipientAccountNumber:"",amount:"",description:""}}),g=N.watch("recipientAccountNumber");(0,t.useEffect)(()=>{let e=setTimeout(async()=>{if(g.length>=10){f(!0),x(null);try{let e=await fetch(`/api/transfers/name-enquiry?accountNumber=${g}`);if(e.ok){let r=await e.json();x(`${r.firstName} ${r.lastName}`)}else x(null)}catch(e){x(null)}finally{f(!1)}}else x(null)},500);return()=>clearTimeout(e)},[g]);let y=async r=>{F(!0);try{let t=await fetch("/api/transfers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientAccountNumber:r.recipientAccountNumber,amount:parseFloat(r.amount),description:r.description})}),s=await t.json();if(!t.ok)throw Error(s.message||"Transfer failed");e({title:"Transfer Request Sent",description:"Your transfer has been submitted for approval.",variant:"default"}),N.reset(),x(null)}catch(r){e({title:"Transfer Failed",description:r.message,variant:"destructive"})}finally{F(!1)}};return(0,r.jsx)("div",{className:"container mx-auto py-10 max-w-lg",children:(0,r.jsxs)(a.Card,{children:[(0,r.jsxs)(a.CardHeader,{children:[(0,r.jsx)(a.CardTitle,{children:"Transfer Money"}),(0,r.jsx)(a.CardDescription,{children:"Send funds to another United Horizon account."})]}),(0,r.jsx)(a.CardContent,{children:(0,r.jsx)(h.Form,{...N,children:(0,r.jsxs)("form",{onSubmit:N.handleSubmit(y),className:"space-y-6",children:[(0,r.jsx)(h.FormField,{control:N.control,name:"recipientAccountNumber",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Recipient Account Number"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(o.Input,{placeholder:"Enter account number",...e})}),(0,r.jsx)("div",{className:"h-6 text-sm",children:j?(0,r.jsxs)("span",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(c.Loader2,{className:"mr-2 h-3 w-3 animate-spin"})," Verifying..."]}):i?(0,r.jsxs)("span",{className:"flex items-center text-green-600 font-medium",children:[(0,r.jsx)(m.CheckCircle,{className:"mr-2 h-3 w-3"})," ",i]}):g.length>=10&&!j?(0,r.jsxs)("span",{className:"flex items-center text-red-500",children:[(0,r.jsx)(u.AlertCircle,{className:"mr-2 h-3 w-3"})," Account not found"]}):null}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:N.control,name:"amount",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Amount (USD)"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(o.Input,{type:"number",placeholder:"0.00",step:"0.01",...e})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:N.control,name:"description",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Description (Optional)"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(o.Input,{placeholder:"What's this for?",...e})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(l.Button,{type:"submit",className:"w-full",disabled:b||!i,children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"})," Processing"]}):"Transfer Funds"})]})})})]})})}e.s(["default",()=>x])}]);